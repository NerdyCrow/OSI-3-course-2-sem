FlushViewOfFile - это функция в Windows API, которая используется для записи содержимого отображенного в память файла обратно в файл на диске.

Когда файл отображается в память с помощью функции MapViewOfFile, операционная система выделяет участок памяти, который соответствует содержимому файла, и заполняет его данными из файла. При чтении данных из отображенного файла в память, производительность может быть высокой, так как чтение происходит непосредственно из памяти, а не с диска.

Однако, если содержимое отображенного файла изменяется в памяти, данные на диске не обновляются автоматически. Это может привести к потере данных, если система перезагрузится или произойдет сбой. Чтобы сохранить изменения в файл, необходимо явно вызвать функцию FlushViewOfFile, чтобы записать измененные данные на диск. Это гарантирует, что данные будут сохранены на диске и не будут потеряны в случае сбоя системы.

---------------------------------------------------------------------------

В данной строке кода new(lp) используется для выделения памяти для объекта типа HTHANDLE в указанном ранее регионе памяти lp.

new(lp) - это оператор размещения new, который позволяет создавать объекты в указанном регионе памяти, в отличие от обычного new, который выделяет память из кучи операционной системы. В данном случае, оператор new(lp) создает объект типа HTHANDLE в области памяти, указанной через указатель lp.

---------------------------------------------------------------------------

wcstombs: Преобразует последовательность расширенных символов в соответствующую последовательность многобайтовых символов. Доступны более безопасные версии этих функций;

---------------------------------------------------------------------------
---------------------------------------------------------------------------
---------------------------------------------------------------------------
---------------------------------------------------------------------------
---------------------------------------------------------------------------
---------------------------------------------------------------------------
---------------------------------------------------------------------------
---------------------------------------------------------------------------
---------------------------------------------------------------------------